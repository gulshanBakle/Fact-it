<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fact App</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        #factNum{
            display: none;
        }
        #options{
            text-align: center;
        }
        #factByDate,#factByYear, #factDate, #factYear{
            display: none;
        }
        #factByDate{
            text-align: center;
        }

    </style>
</head>
<body class="bg-dark">
    <div class="container">
        <div class="row">
            <div class="col-md-6 mx-auto">
                <div class="card bg-primary text-white mt-5 p-5">
                    <h1 style="text-align: center;">Fact it</h1>
                    <div class="row" id="options">
                        
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" checked="checked">
                            <label class="form-check-label" for="inlineRadio1">Facts by Number</label>
                            
                            
                            
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                            <label class="form-check-label" for="inlineRadio2">Facts by date</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3">
                            <label class="form-check-label" for="inlineRadio3">Facts by Year</label>
                        </div><br><br>
                        <div class="row" id="factByNum">
                            <p>Enter any number to check a fact associated with it</p>
                            <input type="number" class="form-control form-control-lg" id="inputNumber" placeholder="Enter any number...">
                            <div id="factNum" class="card-body">
                                <h4 class="card-title">Number fact</h4>
                                <p id="factText" class="card-text"></p>
                            </div>
                        </div>
                        <div class="row" id="factByDate">
                            <p style="text-align: center;"> Select any date to check a fact associated with it</p>
                                <div class='input-group date' id='datetimepicker3'>
                                <input type='date' class="form-control form-control-lg" id="inputDate" style="text-align: center;"/>
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-time"></span>
                                </span>
                            </div>
                            <div id="factDate" class="card-body">
                                <h4 class="card-title">Date fact</h4>
                                <p id="factTextDate" class="card-text"></p>
                            </div>
                        </div>
                        <div class="row" id="factByYear">
                            <p>Enter any year to check a fact associated with it</p>
                            <input type="number" class="form-control form-control-lg" id="inputYear" placeholder="Enter any year...">
                            <div id="factYear" class="card-body">
                                <h4 class="card-title">Year fact</h4>
                                <p id="factTextYear" class="card-text"></p>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
    <script>

        let numberId=document.getElementById('inputNumber');
        let factText=document.getElementById('factText');
        let fact=document.getElementById('factNum');
        let factByNum=document.getElementById('factByNum');

        let factByDate=document.getElementById('factByDate');
        let factDate=document.getElementById('factDate');
        let inputDate=document.getElementById('inputDate');
        let factTextDate=document.getElementById('factTextDate');


        let factByYear=document.getElementById('factByYear');
        let factYear=document.getElementById('factYear');
        let inputYear=document.getElementById('inputYear');
        let factTextYear=document.getElementById('factTextYear');



        radio1=document.getElementById('inlineRadio1').addEventListener('click',generateNumberFact);
        radio2=document.getElementById('inlineRadio2').addEventListener('click',generateDateFact);
        radio3=document.getElementById('inlineRadio3').addEventListener('click',generateYearFact);

        
        function generateNumberFact(){
            console.log('Number radio selected..')
            factByDate.style.display='none';
            factByYear.style.display='none';
            factByNum.style.display='block';

            numberId.addEventListener('input',generateFact);

            function generateFact(){
            num=numberId.value;
                
            var xhr= new XMLHttpRequest();
            xhr.open('GET','http://numbersapi.com/'+num,true);

            xhr.onload=function(){
                if(this.status==200 && num!=''){
                    //console.log('connection success...');
                    factText.innerHTML=this.responseText;
                    fact.style.display='block';
                }
            }
            xhr.send();    
            }

        }
        function generateDateFact(){
            console.log('Date radio selected..');
            factByNum.style.display='none';
            factByYear.style.display='none';
            factByDate.style.display='block';

            inputDate.addEventListener('input',generateFactByDate);

            function generateFactByDate(){
                dt=inputDate.value;
                // console.log(dt);
                console.log('http://numbersapi.com/'+dt[5]+dt[6]+'/'+dt[8]+dt[9]+'/date');

                

                var xhr=new XMLHttpRequest();
                xhr.open('GET','http://numbersapi.com/'+dt[5]+dt[6]+'/'+dt[8]+dt[9]+'/date',true);

                xhr.onload=function(){
                    if(this.status==200){
                        //console.log(this.responseText);
                        factDate.style.display='block';
                        factTextDate.innerHTML=this.responseText;
                    }
                }
                xhr.send();
            }
        }

        function generateYearFact(){
            console.log('Year radio selected..')
            factByNum.style.display='none';
            factByDate.style.display='none';
            factByYear.style.display='block';

            inputYear.addEventListener('input',generateFactByYear);

            function generateFactByYear(){
                yr=inputYear.value;
                // console.log(dt);
                //console.log('http://numbersapi.com/'+dt[5]+dt[6]+'/'+dt[8]+dt[9]+'/'+'/date');

                var xhr=new XMLHttpRequest();
                xhr.open('GET','http://numbersapi.com/'+yr+'/year',true);

                xhr.onload=function(){
                    if(this.status==200){
                        console.log(this.responseText);
                        factYear.style.display='block';
                        factTextYear.innerHTML=this.responseText;
                    }
                }
                xhr.send();
            }
        }  
    </script>  
</body>
</html>